[buildout]
extends =
    buildout.cfg

extensions =
    mr.developer

sources = sources
auto-checkout = *
always-checkout = force
sources-dir = extras

parts +=
    omelette
    test
    test-all
    test-bundle
    robot


[instance]
debug-mode = on
eggs +=
    plone.app.dexterity
    collective.geo.behaviour
    plone.reload
    Products.PrintingMailHost
    Products.PDBDebugMode
zcml +=
    plone.reload


[omelette]
recipe = collective.recipe.omelette
eggs = ${instance:eggs}


[test]
recipe = zc.recipe.testrunner
defaults = ['--auto-color', '--auto-progress']
eggs =
    lxml
    collective.geo.contentlocations [test]
    collective.geo.kml [test]
    collective.geo.mapwidget [test]
    collective.geo.openlayers [test]
    collective.geo.settings [test]
    collective.geo.geographer [test]
    collective.z3cform.colorpicker

[test-all]
<= test
defaults = ['--auto-color', '--auto-progress', '-s', 'collective.geo']


[robot]
recipe = zc.recipe.egg
eggs =
    Pillow
    ${test:eggs}
    plone.app.robotframework[ride,reload]

[test-bundle]
<= test
defaults = ['--auto-color', '--auto-progress', '-s', 'collective.geo.bundle']
eggs =
    collective.geo.bundle [test]
